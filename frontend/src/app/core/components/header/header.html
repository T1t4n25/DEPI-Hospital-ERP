<header class="header bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 sticky top-0 z-50">
  <div class="flex items-center gap-4">
    <h1 class="text-xl font-semibold text-gray-800">Hospital ERP</h1>
  </div>

  <div class="flex items-center gap-4">
    <!-- Search -->


    <!-- Notifications -->
    <div class="relative">
      <button (click)="toggleNotifications()" class="p-2 hover:bg-gray-100 rounded-lg relative transition-colors"
        [attr.aria-label]="'Notifications'">
        <i class="pi pi-bell text-gray-600 text-lg"></i>
        @if (unreadCount > 0) {
        <span
          class="absolute top-1 right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
          {{ unreadCount }}
        </span>
        }
      </button>

      @if (showNotifications()) {
      <div class="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50">
        <div class="p-4 border-b border-gray-200">
          <h3 class="font-semibold text-gray-800">Notifications</h3>
        </div>
        <div class="max-h-96 overflow-y-auto">
          @for (notification of notifications; track notification.id) {
          <div class="p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
            [class.bg-blue-50]="!notification.read">
            <p class="text-sm text-gray-800">{{ notification.message }}</p>
            <p class="text-xs text-gray-500 mt-1">{{ notification.time }}</p>
          </div>
          }
        </div>
      </div>
      }
    </div>

    <!-- User Menu -->
    <div class="relative">
      @if (isAuthenticated() && currentUser()) {
      <button (click)="toggleUserMenu()"
        class="flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors"
        [attr.aria-label]="'User menu'">
        <img [src]="userAvatar()" [alt]="currentUser()!.name" class="w-8 h-8 rounded-full" />
        <div class="hidden md:block text-left">
          <p class="text-sm font-medium text-gray-800">{{ currentUser()!.name }}</p>
          <p class="text-xs text-gray-500">{{ currentUser()!.role }}</p>
        </div>
        <i class="pi pi-angle-down text-gray-600"></i>
      </button>

      @if (showUserMenu()) {
      <div class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-50">
        <div class="p-3 border-b border-gray-100">
          <p class="text-sm font-medium text-gray-800">{{ currentUser()!.name }}</p>
          <p class="text-xs text-gray-500 mt-1">{{ currentUser()!.email }}</p>
          <p class="text-xs text-blue-600 mt-1 font-medium">{{ currentUser()!.role }}</p>
        </div>
        <div class="p-2">
          <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
            <i class="pi pi-user"></i>
            <span>Profile</span>
          </a>
          <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
            <i class="pi pi-cog"></i>
            <span>Settings</span>
          </a>
          <hr class="my-1" />
          <a href="#" (click)="logout($event)"
            class="flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg">
            <i class="pi pi-sign-out"></i>
            <span>Logout</span>
          </a>
        </div>
      </div>
      }
      }
    </div>
  </div>
</header>