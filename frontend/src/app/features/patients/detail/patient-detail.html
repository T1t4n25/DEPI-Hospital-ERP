<div class="patient-detail-container p-6">
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>

  <div *ngIf="isLoading" class="flex justify-center items-center py-12">
    <i class="pi pi-spin pi-spinner text-4xl text-primary-600"></i>
  </div>

  <div *ngIf="!isLoading && patient">
    <div class="flex items-center justify-between mb-6">
      <div>
        <a routerLink="/patients"
          class="text-primary-600 hover:text-primary-700 mb-2 inline-flex items-center no-underline font-medium transition-colors duration-200">
          <i class="pi pi-arrow-left mr-2"></i>Back to Patients
        </a>
        <h1 class="text-3xl font-bold text-gray-900 mt-2">{{ patient.firstName }} {{ patient.lastName }}</h1>
        <p class="text-gray-600 mt-1">Patient ID: {{ patient.patientID }}</p>
      </div>
      <div class="flex gap-2">
        <button pButton pRipple type="button" label="Edit" icon="pi pi-pencil" class="p-button-outlined"
          (click)="editPatient()"></button>
        <button pButton pRipple type="button" label="Delete" icon="pi pi-trash"
          class="p-button-outlined p-button-danger" (click)="deletePatient()"></button>
      </div>
    </div>

    <div class="grid grid-cols-1 gap-6">
      <!-- Patient Information -->
      <p-card header="Patient Information" class="shadow-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">First Name</label>
            <p class="text-base font-medium text-gray-900">{{ patient.firstName }}</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">Last Name</label>
            <p class="text-base font-medium text-gray-900">{{ patient.lastName }}</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">Date of Birth</label>
            <p class="text-base font-medium text-gray-900">{{ patient.dateOfBirth }}</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">Gender</label>
            <p class="text-base font-medium text-gray-900">
              <p-tag [value]="patient.genderName"
                [severity]="patient.genderName === 'Male' ? 'info' : 'success'"></p-tag>
            </p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">Blood Type</label>
            <p class="text-base font-medium text-gray-900">
              <p-tag [value]="patient.bloodTypeName" severity="danger"></p-tag>
            </p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">Contact Number</label>
            <p class="text-base font-medium text-gray-900">{{ patient.contactNumber }}</p>
          </div>
          <div class="md:col-span-2 lg:col-span-3">
            <label class="block text-sm font-medium text-gray-600 mb-1">Address</label>
            <p class="text-base font-medium text-gray-900">{{ patient.address }}</p>
          </div>
        </div>
      </p-card>
    </div>
  </div>

  <div *ngIf="!isLoading && !patient" class="text-center py-12">
    <i class="pi pi-exclamation-circle text-6xl text-gray-400 mb-4"></i>
    <p class="text-xl text-gray-600">Patient not found</p>
    <a routerLink="/patients" class="text-primary-600 hover:text-primary-700 mt-4 inline-block">Back to Patients</a>
  </div>
</div>